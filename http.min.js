"use strict";function $http(t){function n(t,n,c){var i,s=new XMLHttpRequest;if(t===o.GET?(n=function(t,n){if(!n)return t;var o=t+"?",e=0;for(var r in n)n.hasOwnProperty(r)&&(e++&&(o+="&"),o+=encodeURIComponent(r)+"="+encodeURIComponent(n[r]));return o}(n,c),i=null):(i=new FormData,Object.keys(c).forEach(function(t){i.append(t,c[t])})),t===o.GET){var a=iqwerty.http.Cache().getCache(n);if(null!=a)return"function"==typeof r.onLoad?r.onLoad(a):void 0}"function"==typeof r.onLoadStart&&(s.onloadstart=function(){r.onLoadStart(this.readyState)}),"function"==typeof r.onProgress&&(s.upload.onprogress=function(t){r.onProgress(t)}),"function"==typeof r.onError&&(s.onerror=function(){r.onError(this.status)}),s.onload=function(){u.cache&&t===o.GET&&iqwerty.http.Cache().setCache(n,this.response),"function"==typeof r.onLoad&&(this.status===e.OK?r.onLoad(this.response):"function"==typeof r.onError&&r.onError(this.status)),s=null,i=null,r=null},s.open(t,n,!0),s.send(i)}var o={GET:"get",POST:"post",PUT:"put",DELETE:"delete"},e={OK:200},r={},u={};return{cache:function(){return u.cache=!0,this},begin:function(t){return r.onLoadStart=t,this},progress:function(t){return r.onProgress=t,this},success:function(t){return r.onLoad=t,this},error:function(t){return r.onError=t,this},get:function(e){return n(o.GET,t,e)},post:function(e){return n(o.POST,t,e)},put:function(e){return n(o.PUT,t,e)},delete:function(e){return n(o.DELETE,t,e)}}}var iqwerty=iqwerty||{};iqwerty.http=function(){function t(){var n={},o=t.prototype.cached;return n.getCache=function(t){return o[t]},n.setCache=function(t,e){null==n.getCache(t)&&(o[t]=e)},n}return t.prototype.cached={},{Request:$http,Cache:t}}(),"undefined"!=typeof module&&(module.exports=iqwerty.http);