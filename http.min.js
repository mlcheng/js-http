"use strict";function $http(t){function n(t,n,c){var i,s=new XMLHttpRequest;if(t===o.GET?(n=function(t,n){if(!n)return t;var o=t+"?",r=0;for(var e in n)n.hasOwnProperty(e)&&(r++&&(o+="&"),o+=encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return o}(n,c),i=null):(i=new FormData,Object.keys(c).forEach(function(t){i.append(t,c[t])})),t===o.GET){var a=iqwerty.http.Cache().getCache(n);if(null!=a)return"function"==typeof e.onLoad?e.onLoad(a):void 0}"function"==typeof e.onLoadStart&&(s.onloadstart=function(){e.onLoadStart(this.readyState)}),"function"==typeof e.onProgress&&(s.upload.onprogress=function(t){e.onProgress(t)}),"function"==typeof e.onError&&(s.onerror=function(){e.onError(this.status)}),s.onload=function(){u.cache&&t===o.GET&&iqwerty.http.Cache().setCache(n,this.response),"function"==typeof e.onLoad&&(this.status===r.OK?e.onLoad(this.response):"function"==typeof e.onError&&e.onError(this.status)),s=null,i=null,e=null},s.open(t,n,!0),s.send(i)}var o={GET:"get",POST:"post",PUT:"put",DELETE:"delete"},r={OK:200},e={},u={};return{cache:function(){return u.cache=!0,this},begin:function(t){return e.onLoadStart=t,this},progress:function(t){return e.onProgress=t,this},success:function(t){return e.onLoad=t,this},error:function(t){return e.onError=t,this},get:function(r){return n(o.GET,t,r)},post:function(r){return n(o.POST,t,r)},put:function(r){return n(o.PUT,t,r)},"delete":function(r){return n(o.DELETE,t,r)}}}var iqwerty=iqwerty||{};iqwerty.http=function(){function t(){var n={},o=t.prototype.cached;return n.getCache=function(t){return o[t]},n.setCache=function(t,r){null==n.getCache(t)&&(o[t]=r)},n}return t.prototype.cached={},{Request:$http,Cache:t}}();