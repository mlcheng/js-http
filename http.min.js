"use strict";function $http(t){function n(t,n,c){if(t===o.GET){var i=iqwerty.http.Cache().getCache(n);if(null!=i)return"function"==typeof r.onLoad?r.onLoad(i):void 0}var a,s=new XMLHttpRequest;t===o.GET?(n=function(t,n){if(!n)return t;var o=t+"?",e=0;for(var r in n)n.hasOwnProperty(r)&&(e++&&(o+="&"),o+=encodeURIComponent(r)+"="+encodeURIComponent(n[r]));return o}(n,c),a=null):(a=new FormData,Object.keys(c).forEach(function(t){a.append(t,c[t])})),"function"==typeof r.onLoadStart&&(s.onloadstart=function(){r.onLoadStart(this.readyState)}),"function"==typeof r.onProgress&&(s.upload.onprogress=function(t){r.onProgress(t)}),"function"==typeof r.onError&&(s.onerror=function(){r.onError(this.status)}),s.onload=function(){u.cache&&t===o.GET&&iqwerty.http.Cache().setCache(n,this.response),"function"==typeof r.onLoad&&(this.status===e.OK?r.onLoad(this.response):"function"==typeof r.onError&&r.onError(this.status)),s=null,a=null,r=null},s.open(t,n,!0),s.send(a)}var o={GET:"get",POST:"post",PUT:"put",DELETE:"delete"},e={OK:200},r={},u={};return{cache:function(){return u.cache=!0,this},begin:function(t){return r.onLoadStart=t,this},progress:function(t){return r.onProgress=t,this},success:function(t){return r.onLoad=t,this},error:function(t){return r.onError=t,this},get:function(e){return n(o.GET,t,e)},post:function(e){return n(o.POST,t,e)},put:function(e){return n(o.PUT,t,e)},"delete":function(e){return n(o.DELETE,t,e)}}}var iqwerty=iqwerty||{};iqwerty.http=function(){function t(){var n={};return n.getCache=function(n){return t.prototype.cached[Object.keys(t.prototype.cached).find(function(t){return n===t})]},n.setCache=function(o,e){null==n.getCache(o)&&(t.prototype.cached[o]=e)},n}return t.prototype.cached={},{Request:$http,Cache:t}}();